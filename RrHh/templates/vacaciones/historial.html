{% extends 'layout/base.html'%}

{%block title%}{{ title }}{%endblock%}
{% block stylesheets %}
{% load static %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css" integrity="sha512-mSYL/HkXjOoSh8an/6JWnvmzkhS4HRzYRwZvnmhPxYBXAb1hcqXdvigEFbEfjf1n+ZUyVTRFVSNRQcf2tPzxQw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js" integrity="sha512-T/tUfKSV1bihCnd+MxKD0Hm1uBBroVYBOYSk1knyvQ9VyZJpc/ALb4P0r9uboCVPPLMTiCT8Y8XdHHBHhVxX3Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<link href='https://fonts.googleapis.com/css?family=Roboto:400,500,400italic,300italic,300,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="{% static 'assets/css/HV.style.css' %}" />
{% endblock stylesheets %}
{% block content %}
<div class="row">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header card-header-primary">
                <div class="col-md-12" style="text-align: right;">
                    <button type="button" class="btn-close BtnCancel col-md-2"></button>
                </div>
                <h4 class="card-title col-md-8">{{ title }}</h4>
                <p class="card-category"></p>
            </div>
            <div class="card-body">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-12 d-flex align-items-stretch">
                            <div class="card w-100">
                                <nav class="navbar navbar-expand-lg navbar-red bg-red">
                                    <div class="container-fluid">
                                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                                            <span class="navbar-toggler-icon"></span>
                                        </button>
                                        <div class="collapse navbar-collapse" id="navbarNav">
                                            <ul class="nav nav-tabs" id="myTab" role="tablist">
                                                <li class="nav-item" role="presentation">
                                                    <button class="nav-link hv" data-id="{{ id_hv }}" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true">Hoja de Vida </button>
                                                </li>
                                                <li class="nav-item" role="presentation">
                                                    <button class="nav-link history" data-id="{{ id_hv }}" data-bs-toggle="tab" data-bs-target="#profile" type="button" role="tab" aria-controls="profile" aria-selected="false">Llamados de atención</button>
                                                </li>
                                                <li class="nav-item" role="presentation">
                                                    <button class="nav-link permisos " data-id="{{id_hv}}" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact" type="button" role="tab" aria-controls="contact" aria-selected="false">Historial de permisos</button>
                                                </li>
                                                <li class="nav-item" role="presentation">
                                                    <button class="nav-link vacaciones active" data-id="{{id_hv}}" id="about-tab" data-bs-toggle="tab" data-bs-target="#about" type="button" role="tab" aria-controls="about" aria-selected="false">Historial Vacaciones</button>
                                                </li>
                                                <li class="nav-item" role="presentation">
                                                    <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact" type="button" role="tab" aria-controls="contact" aria-selected="false">Contacto</button>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </nav>
                                {% if vacaciones %}
                                <div class="col-md-12 mt-3">
                                    <div class="card">
                                        <!-- Contenido agrupado -->
                                        <div class="card-body">
                                            <div class="container-fluid">
                                                <div class="row">
                                                    <div class="col-lg-12 d-flex align-items-stretch">
                                                        <div class="form-group text-center w-100">
                                                            <div class="card">
                                                                <div class="card-body">
                                                                    <div class="d-sm-flex d-block align-items-center justify-content-between mb-9">
                                                                        <div class="profile-container">
                                                                            <table class="table  text-center">
                                                                                <tr>
                                                                                    <th colspan="3" style="font-size: 40px;">Días disponibles</th>
                                                                                    <th colspan="3" style="font-size: 40px;">Año</th>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td colspan="3" style="font-size: 80px; font-style: italic;">{{ dias_disponibles }}</td>
                                                                                    <td colspan="3" style="font-size: 80px; font-style: italic;">{{ year }}</td>
                                                                                </tr>
                                                                            </table>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                   
                                    <!-- <div class="col-md-12 mt-3">
                                        <div class="form-group">
                                            
                                            <p>el colaborador cuenta con {{ dias }} de vacaciones disponibles del presente año</p>
                                        </div>
                                    </div> -->

                                
                                    <div class="col-md-12">
                                        <div class="card">
                                            <!-- Contenido agrupado -->
                                            <div class="card-body">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-lg-12 d-flex align-items-stretch">
                                                            <div class="card w-100">
                                                                <div class="card-body">
                                                                    <div class="d-sm-flex d-block align-items-center justify-content-between mb-9">
                                                                        <div class="card-body">
                                                                            <div class="profile-container">
                                                                                <table class="table table-striped" style="width:100%">
                                                                                    <thead class="text-primary">
                                                                                        <tr>
                                                                                            <th>ID SOLICITUD</th>
                                                                                            <th>FECHA INICIO VACACIONES</th>
                                                                                            <th>FECHA FIN VACACIONES</th>
                                                                                            <th>DIAS</th>
                                                                                            <th>ESTADO</th>
                                                                                            <th>AUTORIZADO POR</th>
                                                                                            <th>FECHA DE AUTORIZACIÓN</th>
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                        {% for x in historial %}
                                                                                            <tr>
                                                                                                <td>{{ x.IdSolicitud }}</td>
                                                                                                {% if xfecha_inicio_alternativa %}
                                                                                                    <td>{{ x.fecha_inicio_alternativa }}</td>
                                                                                                    <td>{{ x.fecha_fin_alternativa }}</td>
                                                                                                    <td>{{ x.dias_alternativo }}</td>
                                                                                                {% else %}
                                                                                                <td>{{ x.fecha_inicial }}</td>
                                                                                                <td>{{ x.fecha_final }}</td>
                                                                                                <td>{{ x.dias }}</td>
                                                                                                {% endif %}
                                                                                                <td>{{ x.estado }}</td>
                                                                                                <td>{{ x.user_updated }}</td>
                                                                                                <td>{{ x.updated_at }}</td>
                                                                                            </tr>
                                                                                        {% endfor %}
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                {% else %}
                                    <div class="col-md-12">
                                        <div class="card">
                                            <div class="card-body">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-lg-12 d-flex align-items-stretch">
                                                            <div class="card w-100">
                                                                <div class="card-body">
                                                                    <div class="d-sm-flex d-block align-items-center justify-content-between mb-9">
                                                                        <div class="card-body">
                                                                            <div class="profile-container">
                                                                                <p>El colaborador no ha solicitado vacaciones en el año</p>
                                                                                <p> el colaborador cuenta con {{ dias_disponibles }} dias de vacaciones correspondientes al año actual</p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card-footer">
            </div>
        </div>
    </div>
</div>
{% endblock content %}
{% block javascripts %}

<script type="text/javascript">

    

$('.BtnCancel').click(function () {
//crear alerta con la variable title y el url de redireccionamiento))
    // url = '{{ cancel_url }}';
    location.href = '{{ list_url }}';  
});

$('.history').click(function () {
  var id = $(this).attr('data-id');
  var url = "{% url 'RrHh:Historial_HV' 0 %}".replace('0', id);
  location.href = url;
});

$('.permisos').click(function () {
  var id = $(this).attr('data-id');
  var url = "{% url 'RrHh:Historial_SP' 0 %}".replace('0', id);
  location.href = url;

});

$('.hv').click(function () {
  var id = $(this).attr('data-id');
      var url = "{% url 'RrHh:Detalle_HV' 0 %}".replace('0', id); 
      location = url;
      // location.href = url;
  // var id = $(this).attr('data-id');
  // alert ('{{hv}}' + id);

  // // var url = "{% url 'RrHh:Detalle_HV' 0 %}".replace('0', id);
  // // location.href = url;
  // alert(id)
});
</script>
{% endblock javascripts %}