{% extends 'layout/base.html'%}

{%block title%}{{ title }}{%endblock%}
{% block stylesheets %}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css" integrity="sha512-mSYL/HkXjOoSh8an/6JWnvmzkhS4HRzYRwZvnmhPxYBXAb1hcqXdvigEFbEfjf1n+ZUyVTRFVSNRQcf2tPzxQw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js" integrity="sha512-T/tUfKSV1bihCnd+MxKD0Hm1uBBroVYBOYSk1knyvQ9VyZJpc/ALb4P0r9uboCVPPLMTiCT8Y8XdHHBHhVxX3Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

{% endblock stylesheets %}
{% block content %}

<form method="post" enctype="multipart/form-data">
  {% csrf_token %}
  <div class="row">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header card-header-primary">
          <div class="col-md-12" style="text-align: right;">
            <button type="button" class="btn-close BtnCancel col-md-2"></button>
        </div>
          <h4 class="card-title">{{ title }}</h4>
          <p class="card-category"></p>
        </div>
        <div class="card-body">
          <div class="container-fluid">
            <div class="row">
              <div class="col-lg-12 d-flex align-items-strech">                  
                <div class="card w-100">
                  <div class="card-body">
                    <div class="d-sm-flex d-block align-items-center justify-content-between mb-9">                        
                      <div class="card-body">
                        <div class="profile-container">
                          <table class="table">
                            <tr>
                              <td colspan="8">
                                <div class="form-file">
                                  <div class="form-file__action">                                
                                    <input type="file" name="imagen" id="id_imagen" />                                
                                  </div>
                                  <div class="form-file__result" id="result-imagen">
                                    {% for field in form %}
                                      {% if field.name == 'imagen' %}
                                        <img src="{{ field.value.url }}" alt="100%" width="100%"  />
                                      {% endif %}
                                    {% endfor %}
                                  </div>
                                </div> 
                              </td>
                            </tr>
                            <tr><td colspan="8" class="text-center"> <h3>DATOS PERSONALES</h3></td></tr>
                            <tr><td colspan="8" class="text-center"></td></tr>
                            <tr>
                              <td>{{ form.nombre.label }}</td>
                              <td colspan="2">{{ form.nombre }}</td>
                              <td>{{ form.apellido.label }}</td>
                              <td colspan="3">{{ form.apellido }}</td>
                            </tr>
                            <tr>
                              <td>{{ form.direccion.label }}</td>
                              <td colspan="2">{{ form.direccion }}</td>
                              <td>{{ form.email.label }}</td>
                              <td colspan="3">{{ form.email }}</td>
                            </tr>
                            <tr>
                              <td>{{ form.telefono.label }}</td>
                              <td>{{ form.telefono }}</td>
                              <td>{{ form.fecha_nacimiento.label }}</td>
                              <td>{{ form.fecha_nacimiento }}</td>
                              <td>{{ form.grupo_sanguineoFK.label }}</td>
                              <td colspan="2">{{ form.grupo_sanguineoFK }}</td>
                            </tr>
                            <tr>

                              <td>{{ form.tipo_documentoFK.label }}</td>  
                                <td >{{ form.tipo_documentoFK }}</td>   
                                <td>{{ form.numero_identificacion.label }}</td>
                                <td colspan="3">{{ form.numero_identificacion }}</td>
                                                              
                            </tr>
                            <tr>
                                                              
                              <td>{{ form.fecha_expedicion.label }}</td>
                              <td>{{ form.fecha_expedicion }}</td>
                              <td>{{ form.lugar_expedicion.label }}</td>
                              <td>{{ form.lugar_expedicion }}</td>
                              <td>{{ form.hijos.label }}</td>
                              <td colspan="2">{{ form.hijos }}</td>

                            </tr>
                            <tr>
                              <td>{{ form.Municipio_FK.label }}</td>
                              <td>{{ form.Municipio_FK }}</td>
                              <td>{{ form.Barrio_FK.label }}</td>
                              <td>{{ form.Barrio_FK }}</td>
                              <td>{{ form.nacionalidad_FK.label }}</td>
                              <td colspan="2">{{ form.nacionalidad_FK }}</td>
                            </tr>
                            <tr>
                              <td>{{ form.Libreta_Militar.label }}</td>
                              <td >{{ form.Libreta_Militar }}</td>
                              <td>{{ form.Distrito_Libreta.label }}</td>
                              <td>{{ form.Distrito_Libreta }}</td>
                              <td>{{ form.Clase_libreta.label }} </td>
                              <td colspan="2">{{ form.Clase_libreta }}</td>
                            </tr>
                            <tr>
                              <td>{{ form.Tarjeta_Profesional.label }}</td>
                              <td>{{ form.Tarjeta_Profesional }}</td>
                              <td>{{ form.eps.label }}</td>
                              <td>{{ form.eps }}</td>
                              <td>{{ form.fondo_pensionFK.label }}</td>
                              <td colspan="2">{{ form.fondo_pensionFK }}</td>
                              
                            </tr>
                            <tr>
                              <td>{{ form.fondo_cesantiasFK.label }}</td>
                              <td colspan="2">{{ form.fondo_cesantiasFK }}</td>
                              <td>{{ form.CajaCompensacionFK.label }}</td>
                              <td colspan="3">{{ form.CajaCompensacionFK }}</td>

                            </tr>
                            <tr>

                              <td>{{ form.talla_camisa.label }}</td>
                              <td>{{ form.talla_camisa }}</td>
                              <td>{{ form.talla_pantalon.label }}</td>
                              <td>{{ form.talla_pantalon }}</td>
                              <td>{{ form.talla_zapatos.label }}</td>
                              <td colspan="2">{{ form.talla_zapatos }}</td>
                            </tr>
                            <tr>
                              
                              <td>{{ form.contacto_emergencia.label }}</td>
                              <td>{{ form.contacto_emergencia }}</td>
                              <td>{{ form.parentesco.label }}</td>
                              <td>{{ form.parentesco }}</td>
                              <td>{{ form.telefono_emergencia.label }}</td>
                              <td>{{ form.telefono_emergencia }}</td>                             

                            </tr>
                            <tr>
                              
                              <td>{{ form.vivienda_FK.label }}</td>
                              <td>{{ form.vivienda_FK }}</td>
                              <td>{{ form.linkedin.label }}</td>
                              <td>{{ form.linkedin }}</td>
                              <td>{{ form.whatsapp.label }}</td>
                              <td>{{ form.whatsapp }}</td>
                            </tr>
                            
                            <tr>
                              <td>{{ form.upload_cv.label }}</td>
                              <td colspan="5">{{ form.upload_cv }}</td>
                            </tr>
                          </table>
                          <!-- Grupo Familiar -->
            <div class="col-md-12">
              <div class="card">
                <div class="card-header card-header-primary">
                  <div class="col-md-12" style="text-align: right;">
                    <button type="button" class="btn-close BtnCancel col-md-2"></button>
                  </div>
                  <h4 class="card-title">Grupo Familiar</h4>
                  <p class="card-category"></p>
                </div>
                <div class="card-body">
                  <div class="container-fluid">
                    <button type="button" class="btn btn-primary BtnFlia btn-xs">+ Añadir Familiar</button>
                    <div class="row">
                      <div class="col-lg-12 d-flex align-items-strech">
                        <div class="card w-100">
                          <div class="card-body">
                            <div class="d-sm-flex d-block align-items-center justify-content-between mb-9">
                              <div class="card-body">
                                <div class="profile-container">
                                  <table class="table table-striped" id="Familia" style="width:100%">
                                    <thead>
                                      <tr>
                                        <th>NOMBRES</th>
                                        <th>APELLIDOS</th>
                                        <th>PARENTESCO</th>
                                        <th>GENERO</th>
                                        <th>TIPO DE DOCUMENTO</th>
                                        <th>IDENTIFICACION</th>
                                        <th>FECHA DE NACIMIENTO</th>
                                        <th>ACCIONES</th>
                                      </tr>
                                    </thead>
                                    <tbody>
                                      {% for GF in Lista_GF %}
                                        <tr>
                                          <td>{{ GF.nombre_GF }}</td>
                                          <td>{{ GF.apellido_GF }}</td>
                                          <td>{{ GF.parentesco_GF }}</td>
                                          <td>{{ GF.sexo_FK_GF }}</td>
                                          <td>{{ GF.tipo_documento_GF }}</td>
                                          <td>{{ GF.numero_identificacion_GF }}</td>
                                          <td>{{ GF.fecha_nacimiento_GF }}</td>
                                          <td>
                                            <button type="button" class="btn btn-danger btn-xs delete-row"><i class="material-icons">delete</i>Eliminar</button>
                                          </td>
                                        </tr>
                                      {% endfor %}
                                    </tbody>
                                  </table>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Educacion -->
            <div class="col-md-12">
              <div class="card">
                <div class="card-header card-header-primary">
                  <div class="col-md-12" style="text-align: right;">
                    <button type="button" class="btn-close BtnCancel col-md-2"></button>
                  </div>
                  <h4 class="card-title">Educación</h4>
                  <p class="card-category"></p>
                </div>
                <div class="card-body">
                  <div class="container-fluid">
                    <button type="button" class="btn btn-primary BtnEdu btn-xs">+ Añadir Educación</button>
                    <div class="row">
                      <div class="col-lg-12 d-flex align-items-strech">
                        <div class="card w-100">
                          <div class="card-body">
                            <div class="d-sm-flex d-block align-items-center justify-content-between mb-9">
                              <div class="card-body">
                                <div class="profile-container">
                                  <table class="table table-striped" id="Educacion" style="width:100%">
                                    <thead>
                                      <tr>
                                        <th>INSTITUCIÓN</th>
                                        <th>TÍTULO OBTENIDO</th>
                                        <th>PAÍS</th>
                                        <th>DURACIÓN</th>
                                        <th>UNIDAD DE TIEMPO</th>
                                        <th>FECHA INICIO</th>
                                        <th>FECHA FINAL</th>
                                        <th>ACCIONES</th>
                                      </tr>
                                    </thead>
                                    <tbody>
                                      {% for EDUC in Lista_EDUC %}
                                        <tr>
                                          <td>{{ EDUC.institucion_EDU }}</td>
                                          <td>{{ EDUC.titulo_EDU }}</td>
                                          <td>{{ EDUC.pais_EDU }}</td>
                                          <td>{{ EDUC.duracion_EDU }}</td>
                                          <td>{{ EDUC.TextoUnidad_EDU }}</td>
                                          <td>{{ EDUC.fecha_inicio_EDU }}</td>
                                          <td>{{ EDUC.fecha_fin_EDU }}</td>
                                          <td>
                                            <button type="button" class="btn btn-danger btn-xs delete-row">Eliminar</button>
                                          </td>
                                        </tr>
                                      {% endfor %}
                                    </tbody>
                                  </table>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Experiencia -->
            <div class="col-md-12">
              <div class="card">
                <div class="card-header card-header-primary">
                  <div class="col-md-12" style="text-align: right;">
                    <button type="button" class="btn-close BtnCancel col-md-2"></button>
                  </div>
                  <h4 class="card-title">Experiencia Laboral</h4>
                  <p class="card-category"></p>
                </div>
                <div class="card-body">
                  <div class="container-fluid">
                    <button type="button" class="btn btn-primary BtnExp btn-xs">+ Añadir Experiencia</button>
                    <div class="row">
                      <div class="col-lg-12 d-flex align-items-strech">
                        <div class="card w-100">
                          <div class="card-body">
                            <div class="d-sm-flex d-block align-items-center justify-content-between mb-9">
                              <div class="card-body">
                                <div class="profile-container">
                                  <table class="table table-striped" id="Experiencia" style="width:100%">
                                    <thead>
                                      <tr>
                                        <th>CARGO</th>
                                        <th>EMPRESA</th>
                                        <th>FECHA INICIO</th>
                                        <th>FECHA FINAL</th>
                                        <th>ACCIONES</th>
                                      </tr>
                                    </thead>
                                    <tbody>
                                      {% for EXP in Lista_EXP %}
                                        <tr>
                                          <td>{{ EXP.cargo_EXP }}</td>
                                          <td>{{ EXP.empresa_EXP }}</td>
                                          <td>{{ EXP.fecha_inicio_EXP }}</td>
                                          <td>{{ EXP.fecha_fin_EXP }}</td>
                                          <td>
                                            <button type="button" class="btn btn-danger btn-xs delete-row">Eliminar</button>
                                          </td>
                                        </tr>
                                      {% endfor %}
                                    </tbody>
                                  </table>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
        </div>
        <div class="card-footer">
          <button type="submit" class="btn btn-primary btn-xs">
          <i class="material-icons ">save</i>Agregar 
        </button>
        <button type="button" class="btn btn-secundary BtnCancel">
          <i class="material-icons ">cancel</i>Cancelar
        </button>
      </div>
    </div>
  </div>
</form>

{% endblock content %}
{% block javascripts %}

<script type="text/javascript">
  $('.BtnCancel').click(function () {
    url = '{{ cancel_url }}';
    location.href = url;
  });
  // Grupo Familiar
  $(document).ready(function() {
    $(".BtnFlia").click(function() {
      var html = '<tr>';
      html += '<td>{{ GF_FORM.nombre_GF }}</td>';
      html += '<td>{{ GF_FORM.apellido_GF }}</td>';
      html += '<td>{{ GF_FORM.parentesco_GF }}</td>';
      html += '<td>{{ GF_FORM.sexo_FK_GF | escapejs }}</td>';
      html += '<td>{{ GF_FORM.tipo_documento_GF | escapejs }}</td>';
      html += '<td>{{ GF_FORM.numero_identificacion_GF }}</td>';
      html += '<td>{{ GF_FORM.fecha_nacimiento_GF }}</td>';
      html += '<td><button type="button" class="btn btn-danger btn-xs delete-row">Eliminar</button></td>';
      html += '</tr>';
      $('#Familia tbody').append(html);
    });

    $('#Familia').on('click', '.delete-row', function() {
      $(this).closest('tr').remove();
    });
  });
  // function addRow() {
  //   var rowCount = table.rows.length;
  //   var row = table.insertRow(rowCount);
  //   var cell1 = row.insertCell(-1);
  //   var cell2 = row.insertCell(0);
  //   var cell3 = row.insertCell(1);
    
  
  $(document).ready(function() {
    $(".BtnEdu").click(function() {
      var html = '<tr>';
      html += '<td>{{ EDUC_FORM.institucion_EDU }}</td>';
      html += '<td>{{ EDUC_FORM.titulo_EDU }}</td>';
      html += '<td>{{ EDUC_FORM.pais_EDU | escapejs }}</td>';
      html += '<td>{{ EDUC_FORM.duracion_EDU }}</td>';
      html += '<td>{{ EDUC_FORM.TextoUnidad_EDU }}</td>';
      html += '<td>{{ EDUC_FORM.fecha_inicio_EDU }}</td>';
      html += '<td>{{ EDUC_FORM.fecha_fin_EDU }}</td>';
      html += '<td><button type="button" class="btn btn-danger btn-xs delete-row">Eliminar</button></td>';
      html += '</tr>';
      $('#Educacion tbody').append(html);
    });

    $('#Educacion').on('click', '.delete-row', function() {
      $(this).closest('tr').remove();
    });
  });
 

  $('.BtnExp').click(function () {
    var table = document.getElementById("Exp");
    var rowCount = table.rows.length;
    var row = table.insertRow(rowCount);
    var cell1 = row.insertCell(0);
    var cell2 = row.insertCell(1);
    var cell3 = row.insertCell(2);
    var cell4 = row.insertCell(3);
    
    cell1.innerHTML = '{{ EXP_FORM.cargo_EXP }} ';
    cell2.innerHTML = '{{ EXP_FORM.empresa_EXP }}';
    cell3.innerHTML = '{{ EXP_FORM.fecha_inicio_EXP }}';
    cell4.innerHTML = '{{ EXP_FORM.fecha_fin_EXP }}';

    
    
   
  });
 
  
</script>
{% endblock javascripts %}