<html>
    <head>
        <base href="https://websim.com/">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Búsqueda y Venta de Productos</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <style>
    body {
        background-color: #f8f9fa;
    }
    .custom-shadow {
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
    }
</style>
</head>
<body>
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card custom-shadow">
                    <div class="card-body">
                        <h2 class="card-title text-center mb-4">Búsqueda y Venta de Productos</h2>
                        <form id="searchForm" class="mb-4">
                            <div class="input-group">
                                <input type="text" id="searchInput" class="form-control" placeholder="Buscar productos...">
                                <button class="btn btn-primary" type="submit">Buscar</button>
                            </div>
                        </form>
                        <div id="searchResults" class="mb-4"></div>
                            <h4 class="mb-3">Lista de Venta</h4>
                            <ul id="saleList" class="list-group mb-3"></ul>
                        <div class="d-flex justify-content-between align-items-center">
                            <h5>Total: <span id="totalAmount">$0.00</span></h5>
                            <button id="generateSale" class="btn btn-success">Generar Venta</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
        <script>
    $(document).ready(function() {
        const products = [
            { id: 1, name: "Laptop", price: 999.99 },
            { id: 2, name: "Smartphone", price: 599.99 },
            { id: 3, name: "Tablet", price: 299.99 },
            { id: 4, name: "Smartwatch", price: 199.99 },
            { id: 5, name: "Auriculares Bluetooth", price: 79.99 }
        ];

        let saleItems = [];

        $("#searchForm").submit(function(e) {
            e.preventDefault();
            const searchTerm = $("#searchInput").val().toLowerCase();
            const results = products.filter(product => 
                product.name.toLowerCase().includes(searchTerm)
            );
            displaySearchResults(results);
        });

        function displaySearchResults(results) {
            const resultsHtml = results.map(product => `
                <div class="card mb-2">
                    <div class="card-body d-flex justify-content-between align-items-center">
                        <div>
                            <h5 class="card-title">${product.name}</h5>
                            <p class="card-text">$${product.price.toFixed(2)}</p>
                        </div>
                        <button class="btn btn-primary btn-sm add-to-sale" data-id="${product.id}">Agregar</button>
                    </div>
                </div>
            `).join('');
            $("#searchResults").html(resultsHtml);
        }

        $(document).on("click", ".add-to-sale", function() {
            const productId = $(this).data("id");
            const product = products.find(p => p.id === productId);
            saleItems.push(product);
            updateSaleList();
        });

        function updateSaleList() {
            const saleListHtml = saleItems.map((item, index) => `
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    ${item.name} - $${item.price.toFixed(2)}
                    <button class="btn btn-danger btn-sm remove-from-sale" data-index="${index}">Eliminar</button>
                </li>
            `).join('');
            $("#saleList").html(saleListHtml);
            updateTotal();
        }

        $(document).on("click", ".remove-from-sale", function() {
            const index = $(this).data("index");
            saleItems.splice(index, 1);
            updateSaleList();
        });

        function updateTotal() {
            const total = saleItems.reduce((sum, item) => sum + item.price, 0);
            $("#totalAmount").text(`$${total.toFixed(2)}`);
        }

        $("#generateSale").click(function() {
            if (saleItems.length === 0) {
                alert("La lista de venta está vacía. Agregue productos antes de generar la venta.");
                return;
            }
            alert("Venta generada con éxito. Total: " + $("#totalAmount").text());
            saleItems = [];
            updateSaleList();
        });
    });
</script></body></html>